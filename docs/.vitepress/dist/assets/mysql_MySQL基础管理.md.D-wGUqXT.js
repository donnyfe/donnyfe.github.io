import{_ as a,c as n,o as l,ag as p}from"./chunks/framework.DPDPlp3K.js";const h=JSON.parse('{"title":"MySQL基础管理","description":"","frontmatter":{},"headers":[],"relativePath":"mysql/MySQL基础管理.md","filePath":"mysql/MySQL基础管理.md"}'),o={name:"mysql/MySQL基础管理.md"};function e(t,s,c,i,r,y){return l(),n("div",null,s[0]||(s[0]=[p(`<h1 id="mysql基础管理" tabindex="-1">MySQL基础管理 <a class="header-anchor" href="#mysql基础管理" aria-label="Permalink to &quot;MySQL基础管理&quot;">​</a></h1><p>MySQL 基础管理主要分四个部分：</p><ul><li>用户管理</li><li>权限管理</li><li>重置密码</li><li>连接管理</li></ul><h2 id="用户管理" tabindex="-1">用户管理 <a class="header-anchor" href="#用户管理" aria-label="Permalink to &quot;用户管理&quot;">​</a></h2><h3 id="用户的作用" tabindex="-1">用户的作用 <a class="header-anchor" href="#用户的作用" aria-label="Permalink to &quot;用户的作用&quot;">​</a></h3><ul><li>登录 MySQL 数据库</li><li>管理 MySQL 对象</li></ul><h3 id="用户的定义" tabindex="-1">用户的定义 <a class="header-anchor" href="#用户的定义" aria-label="Permalink to &quot;用户的定义&quot;">​</a></h3><p>白名单：地址列表，运行白名单的 IP 登录 MySQL，管理 MySQL</p><ul><li><code>donny@&#39;localhost&#39;</code>：donny用户能够本地登录 MySQL（socket）</li><li><code>donny@&#39;10.0.0.10&#39;</code>：donny用户能够通过 10.0.0.10 远程登录 MySQL 服务器</li><li><code>donny@&#39;10.0.0.%</code>：donny用户能够通过 10.0.0.xx 远程登录 MySQL 服务器</li></ul><h3 id="用户管理-1" tabindex="-1">用户管理 <a class="header-anchor" href="#用户管理-1" aria-label="Permalink to &quot;用户管理&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 创建用户</span></span>
<span class="line"><span style="color:#6F42C1;">create</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> donny@&#39;localhost&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 创建用户并且设置密码</span></span>
<span class="line"><span style="color:#6F42C1;">create</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> donny@&#39;192.168.1.59&#39;</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;MYSQL@123&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查寻用户信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> user,host,authentication_string from mysql.user;</span></span></code></pre></div><p>常见问题，如：</p><p>异常提示：Your password does not satisfy the current policy requirements</p><p>解决：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 1、查看密码策略</span></span>
<span class="line"><span style="color:#6F42C1;">SHOW</span><span style="color:#032F62;"> VARIABLES</span><span style="color:#032F62;"> LIKE</span><span style="color:#032F62;"> &#39;validate_password%&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;"> 3、修改密码验证等级</span></span>
<span class="line"><span style="color:#005CC5;">set</span><span style="color:#032F62;"> global</span><span style="color:#032F62;"> validate_password_policy=LOW</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 3、设置密码长度</span></span>
<span class="line"><span style="color:#005CC5;">set</span><span style="color:#032F62;"> global</span><span style="color:#032F62;"> validate_password_length=</span><span style="color:#005CC5;">6</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改用户密码</span></span>
<span class="line"><span style="color:#6F42C1;">alter</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> donny@&#39;localhost&#39;</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;456&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 删除用户</span></span>
<span class="line"><span style="color:#6F42C1;">drop</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> donny@&#39;localhost&#39;</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="用户登录" tabindex="-1">用户登录 <a class="header-anchor" href="#用户登录" aria-label="Permalink to &quot;用户登录&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 格式：mysql -u[用户名] -p[密码]</span></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -uroot</span><span style="color:#005CC5;"> -p123</span></span></code></pre></div><h2 id="权限管理" tabindex="-1">权限管理 <a class="header-anchor" href="#权限管理" aria-label="Permalink to &quot;权限管理&quot;">​</a></h2><h3 id="权限的作用" tabindex="-1">权限的作用 <a class="header-anchor" href="#权限的作用" aria-label="Permalink to &quot;权限的作用&quot;">​</a></h3><p>用户对数据库对象有哪些管理能力</p><h3 id="表现方式" tabindex="-1">表现方式 <a class="header-anchor" href="#表现方式" aria-label="Permalink to &quot;表现方式&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 查看权限列表</span></span>
<span class="line"><span style="color:#6F42C1;">show</span><span style="color:#032F62;"> privileges</span><span style="color:#24292E;">;</span></span></code></pre></div><h3 id="授权、回收权限操作" tabindex="-1">授权、回收权限操作 <a class="header-anchor" href="#授权、回收权限操作" aria-label="Permalink to &quot;授权、回收权限操作&quot;">​</a></h3><p>8.0 以前授权语法：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 8.0 以前语法</span></span>
<span class="line"><span style="color:#6F42C1;">grant</span><span style="color:#032F62;"> 权限,权限2,权限3</span><span style="color:#032F62;"> on</span><span style="color:#032F62;"> 对象</span><span style="color:#032F62;"> to</span><span style="color:#032F62;"> 用户</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;密码&#39;</span></span></code></pre></div><p>8.0+授权语法（先创建用户后授权）：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 先创建用户</span></span>
<span class="line"><span style="color:#6F42C1;">grent</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> 用户</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;密码&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 再对用户授权</span></span>
<span class="line"><span style="color:#6F42C1;">garnt</span><span style="color:#032F62;"> 权限,权限2,权限3</span><span style="color:#032F62;"> on</span><span style="color:#032F62;"> 对象</span><span style="color:#032F62;"> to</span><span style="color:#032F62;"> 用户</span></span></code></pre></div><p>权限：</p><ul><li>All： 管理员</li><li>具体权限：普通用户（业务用户、开发用户）</li><li><code>grant option</code>：给别的用户授权</li></ul><p>对象：库，表</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 等同于 chmod -R 755 /  管理员</span></span>
<span class="line"><span style="color:#D73A49;">*</span><span style="color:#24292E;">.</span><span style="color:#D73A49;">*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 等同于 chmod -R 755 /donny 普通用户</span></span>
<span class="line"><span style="color:#6F42C1;">donny.*</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 等同于 chmod -R 755 /donny/ti</span></span>
<span class="line"><span style="color:#6F42C1;">donny.ti</span></span></code></pre></div><h5 id="创建用户并授权" tabindex="-1">创建用户并授权 <a class="header-anchor" href="#创建用户并授权" aria-label="Permalink to &quot;创建用户并授权&quot;">​</a></h5><p><strong>超级管理员级别授权：</strong></p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">grant</span><span style="color:#032F62;"> all</span><span style="color:#032F62;"> on</span><span style="color:#005CC5;"> *</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">*</span><span style="color:#032F62;"> to</span><span style="color:#032F62;"> donny@&#39;10.0.0.0&#39;</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;Mysql@123&#39;</span><span style="color:#032F62;"> with</span><span style="color:#032F62;"> grant</span><span style="color:#032F62;"> option</span></span></code></pre></div><p>含义：</p><ul><li><code>grant all</code>: 授予所有权限</li><li><code>on *.*</code>: 作用于所有数据库的所有对象(表、视图等)</li><li><code>to donny@&#39;10.0.0.0&#39;</code>: 授权给用户donny,且该用户只能从IP 10.0.0.0访问。</li><li><code>identified by &#39;Mysql@123&#39;</code>: 设置该用户密码为 Mysql@123</li><li><code>with grant option</code>: 允许该用户将自己拥有的权限授权给其他用户</li></ul><p><strong>普通用户级别授权：</strong></p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">grant</span><span style="color:#032F62;"> create,update,select,insert,delete</span><span style="color:#032F62;"> on</span><span style="color:#032F62;"> donny.</span><span style="color:#005CC5;">*</span><span style="color:#032F62;"> to</span><span style="color:#032F62;"> donny@&#39;10.0.0.0&#39;</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;Mysql@123&#39;</span></span></code></pre></div><p>含义：</p><ul><li><code>grant create,update,select,insert,delete</code>: 授予创建、更新、查询、插入、删除权限</li><li><code>on donny.*</code>: 作用于donny数据库的所有对象(表、视图等)</li><li><code>to donny@&#39;10.0.0.0&#39;</code>: 授权给用户donny,且该用户只能从IP 10.0.0.0访问。</li><li><code>identified by &#39;Mysql@123&#39;</code>: 设置该用户密码为 Mysql@123</li></ul><h5 id="查询用户权限" tabindex="-1">查询用户权限 <a class="header-anchor" href="#查询用户权限" aria-label="Permalink to &quot;查询用户权限&quot;">​</a></h5><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 查询指定用户权限</span></span>
<span class="line"><span style="color:#6F42C1;">show</span><span style="color:#032F62;"> grants</span><span style="color:#032F62;"> for</span><span style="color:#032F62;"> donny@&#39;localhost&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 查询用户表并使用\\G 格式化信息</span></span>
<span class="line"><span style="color:#D73A49;">select</span><span style="color:#24292E;"> * from mysql.user</span><span style="color:#005CC5;">\\G</span></span></code></pre></div><p>扩展：</p><p>MySQL 授权表：</p><ul><li>user: <code>*.*</code></li><li>db: <code>donny.*</code></li><li>Tables_prov: <code>donny.ti</code></li><li>Columns_prov：列</li></ul><h5 id="回收权限" tabindex="-1">回收权限 <a class="header-anchor" href="#回收权限" aria-label="Permalink to &quot;回收权限&quot;">​</a></h5><p>MySQl 不能通过重复授权修改权限，只能通过回收权限后，重新授权。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">revoke</span><span style="color:#032F62;"> create</span><span style="color:#032F62;"> on</span><span style="color:#032F62;"> donny.</span><span style="color:#005CC5;">*</span><span style="color:#032F62;"> from</span><span style="color:#032F62;"> donny@&#39;10.0.0.0&#39;</span></span></code></pre></div><h2 id="mysql-重置密码" tabindex="-1">MySQL 重置密码 <a class="header-anchor" href="#mysql-重置密码" aria-label="Permalink to &quot;MySQL 重置密码&quot;">​</a></h2><ul><li>跳过授权表</li><li>跳过 TCP/IP 连接</li></ul><ol><li>关闭数据库</li><li>使用安全模式启动</li><li>登录数据库并修改密码</li><li>重启数据库到正常模式</li></ol><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">/etc/init.d/mysqld</span><span style="color:#032F62;"> stop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#032F62;"> start</span><span style="color:#032F62;"> mysqld</span><span style="color:#005CC5;"> --skip-grant-tables</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#032F62;"> restart</span><span style="color:#032F62;"> mysqld</span><span style="color:#005CC5;"> --skip-grant-tables</span></span></code></pre></div><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 查看 mysqld_safe 路径</span></span>
<span class="line"><span style="color:#005CC5;">which</span><span style="color:#032F62;"> mysqld_safe</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 启动数据库</span></span>
<span class="line"><span style="color:#6F42C1;">mysqld_safe</span><span style="color:#005CC5;"> --skip-grant-tables</span></span></code></pre></div><h4 id="重置密码实例" tabindex="-1">重置密码实例 <a class="header-anchor" href="#重置密码实例" aria-label="Permalink to &quot;重置密码实例&quot;">​</a></h4><h5 id="_1、修改配置文件" tabindex="-1">1、修改配置文件 <a class="header-anchor" href="#_1、修改配置文件" aria-label="Permalink to &quot;1、修改配置文件&quot;">​</a></h5><p>在配置文件末尾， 新添一行添加 <code>skip-grant-tables</code>。</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 查看配置文件</span></span>
<span class="line"><span style="color:#6F42C1;">cat</span><span style="color:#032F62;"> /usr/local/etc/my.cnf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 修改配置文件</span></span>
<span class="line"><span style="color:#6F42C1;">vim</span><span style="color:#032F62;"> /usr/local/etc/my.cnf</span></span></code></pre></div><blockquote><p>​ Default Homebrew MySQL server config</p><p><code>[mysqld]</code></p><p>​ Only allow connections from localhost</p><p>bind-address = 127.0.0.1</p></blockquote><h4 id="_3、重置密码" tabindex="-1">3、重置密码 <a class="header-anchor" href="#_3、重置密码" aria-label="Permalink to &quot;3、重置密码&quot;">​</a></h4><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 重启服务</span></span>
<span class="line"><span style="color:#6F42C1;">brew</span><span style="color:#032F62;"> services</span><span style="color:#032F62;"> restart</span><span style="color:#032F62;"> mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 登录mysql, 空格跳过验证</span></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -uroot</span><span style="color:#005CC5;"> -p</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 进入命令模式</span></span>
<span class="line"><span style="color:#6F42C1;">use</span><span style="color:#032F62;"> mysql</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 清空密码</span></span>
<span class="line"><span style="color:#6F42C1;">update</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> set</span><span style="color:#032F62;"> authentication_string=&#39;&#39;</span><span style="color:#032F62;">  where</span><span style="color:#032F62;"> user=&#39;root&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 刷新</span></span>
<span class="line"><span style="color:#6F42C1;">flush</span><span style="color:#032F62;"> privileges</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 重置密码</span></span>
<span class="line"><span style="color:#6F42C1;">alter</span><span style="color:#032F62;"> user</span><span style="color:#032F62;"> &#39;root&#39;@&#39;localhost&#39;</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;Mysql@123&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 再次刷新</span></span>
<span class="line"><span style="color:#6F42C1;">flush</span><span style="color:#032F62;"> privileges</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 退出mysql命令模式</span></span>
<span class="line"><span style="color:#6F42C1;">quit</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 退出命令窗</span></span>
<span class="line"><span style="color:#005CC5;">exit</span><span style="color:#24292E;">;</span></span></code></pre></div><h5 id="_3、恢复配置文件" tabindex="-1">3、恢复配置文件 <a class="header-anchor" href="#_3、恢复配置文件" aria-label="Permalink to &quot;3、恢复配置文件&quot;">​</a></h5><p>删除配置文件末尾的<code> skip-grant-tables</code>， 恢复<code>my.cnf</code>配置文件。</p><h1 id="mysql-连接管理" tabindex="-1">MySQL 连接管理 <a class="header-anchor" href="#mysql-连接管理" aria-label="Permalink to &quot;MySQL 连接管理&quot;">​</a></h1><p>###.1 自带客户端</p><h5 id="mysql" tabindex="-1">mysql <a class="header-anchor" href="#mysql" aria-label="Permalink to &quot;mysql&quot;">​</a></h5><p>连接参数列表：</p><ul><li><code>-u</code>：代表用户名</li><li><code>-p</code>：代表密码</li><li><code>-S</code>：代表本地 socket 文件位置</li><li><code>-h</code>：代表数据库 IP 地址</li><li><code>-P</code>：代表数据库端口号</li><li><code>-e</code>：代表免交互执行数据库命令</li><li><code>&lt;</code>：代表导入 sql 脚本</li></ul><h5 id="socket" tabindex="-1">Socket <a class="header-anchor" href="#socket" aria-label="Permalink to &quot;Socket&quot;">​</a></h5><p>​前提：数据库中必须实现授权 donny@&#39;localhost&#39;用户</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 登录方式：</span></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -udonny</span><span style="color:#005CC5;"> -p123</span><span style="color:#005CC5;"> -S</span><span style="color:#032F62;"> /tmp/mysql.sock</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -udonny</span><span style="color:#005CC5;"> -p</span><span style="color:#005CC5;"> -S</span><span style="color:#032F62;"> /tmp/mysql.sock</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -p123</span><span style="color:#005CC5;"> -S</span><span style="color:#032F62;"> /tmp/mysql.sock</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">mysql</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -uroot</span><span style="color:#005CC5;"> -p123</span></span></code></pre></div><h5 id="tcpip" tabindex="-1">tcpIP <a class="header-anchor" href="#tcpip" aria-label="Permalink to &quot;tcpIP&quot;">​</a></h5><p>前提： 必须创建好可以远程连接的用户</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 不加-P参数，默认3306端口</span></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -udonny</span><span style="color:#005CC5;"> -p123</span><span style="color:#005CC5;"> -h</span><span style="color:#005CC5;"> 10.0.0.1</span><span style="color:#005CC5;"> -P</span><span style="color:#005CC5;"> 3306</span></span></code></pre></div><p>例子：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 创建本地用户donny</span></span>
<span class="line"><span style="color:#6A737D;"># 注意：8.0+必须先creat user 再grant权限</span></span>
<span class="line"><span style="color:#6F42C1;">grant</span><span style="color:#032F62;"> all</span><span style="color:#032F62;"> on</span><span style="color:#005CC5;"> *</span><span style="color:#032F62;">.</span><span style="color:#005CC5;">*</span><span style="color:#032F62;"> to</span><span style="color:#032F62;"> donny@&#39;localhost&#39;</span><span style="color:#032F62;"> identified</span><span style="color:#032F62;"> by</span><span style="color:#032F62;"> &#39;donny@123&#39;</span><span style="color:#24292E;">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 登录测试</span></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -udonny</span><span style="color:#005CC5;"> -p123</span><span style="color:#005CC5;"> -S</span><span style="color:#032F62;"> /tmp/mysql.sock</span></span></code></pre></div><p>Mysqldump 备份工具</p><p>Mysqladmin 管理工具</p><h3 id="远程客户端程序" tabindex="-1">远程客户端程序 <a class="header-anchor" href="#远程客户端程序" aria-label="Permalink to &quot;远程客户端程序&quot;">​</a></h3><p>数据库客户端：</p><ul><li>Navicat</li></ul><h3 id="程序连接" tabindex="-1">程序连接 <a class="header-anchor" href="#程序连接" aria-label="Permalink to &quot;程序连接&quot;">​</a></h3><ul><li>node：npm install mysql2</li><li>python：pip3 install pymysql</li></ul><h1 id="初始化配置" tabindex="-1">初始化配置 <a class="header-anchor" href="#初始化配置" aria-label="Permalink to &quot;初始化配置&quot;">​</a></h1><h3 id="配置方式" tabindex="-1">配置方式 <a class="header-anchor" href="#配置方式" aria-label="Permalink to &quot;配置方式&quot;">​</a></h3><p>1、源码安装——&gt;编译过程中设置初始化参数</p><p>2、配置文件——&gt;数据库启动之前，设定配置文件参数（/etc/my.cnf）。定制 mysql 配置功能</p><p>3、启动脚本命令行——&gt; mysqld_safe --skip-grant-tables --skip-networking</p><p>###.2 配置文件应用</p><p>（1）配置文件读取顺序</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 查看文件读取顺序</span></span>
<span class="line"><span style="color:#6F42C1;">mysqld</span><span style="color:#005CC5;"> --help</span><span style="color:#005CC5;"> --verbose</span><span style="color:#D73A49;"> |</span><span style="color:#6F42C1;">grep</span><span style="color:#032F62;"> my.cnf</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># /etc/my.cnf ——&gt; /etc/mysql/my.cnf ——&gt; /usr/local/etc/my.cnf ——&gt; ~/.my.cnf</span></span></code></pre></div><p>自定义配置文件位置</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">mysqld</span><span style="color:#005CC5;"> --defaults-file=/opt/my.cnf</span></span>
<span class="line"><span style="color:#6F42C1;">mysqld_safe</span><span style="color:#005CC5;"> --defaults-file=/opt/my.cnf</span></span></code></pre></div><p>（2）配置文件书写格式</p><p>标签：用来区分不同程序的参数，有：</p><ul><li><p>服务器端标签：负责数据库服务端运行参数设定</p><ul><li><code>mysqld</code></li><li><code>mysqld_safe</code></li><li><code>server</code> 代表所有服务端</li></ul></li><li><p>客户端标签：只影响本地客户端连接，不影响远程客户端</p><ul><li><code>mysql</code></li><li><code>mysqldump</code></li><li><code>client</code> 代表所有客户端</li></ul></li></ul><h1 id="mysql-启动和关闭" tabindex="-1">MySQL 启动和关闭 <a class="header-anchor" href="#mysql-启动和关闭" aria-label="Permalink to &quot;MySQL 启动和关闭&quot;">​</a></h1><h3 id="启动-mysql" tabindex="-1">启动 MySQL <a class="header-anchor" href="#启动-mysql" aria-label="Permalink to &quot;启动 MySQL&quot;">​</a></h3><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6A737D;"># 方式1</span></span>
<span class="line"><span style="color:#6F42C1;">systemtl</span><span style="color:#032F62;"> start</span><span style="color:#032F62;"> mysqld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 方式2</span></span>
<span class="line"><span style="color:#6F42C1;">mysql.server</span><span style="color:#032F62;"> start</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 方式3</span></span>
<span class="line"><span style="color:#6F42C1;">mysqld_safe</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6A737D;"># 方式4</span></span>
<span class="line"><span style="color:#6F42C1;">mysqld</span></span></code></pre></div><blockquote><p>备注： mysqld_safe 和 mysqld 可以在启动数据库时加入自己执行的参数，如： --skip-grant-tables --skip-networking --defaults-file=/opt/my.cnf</p></blockquote><h3 id="关闭-mysql" tabindex="-1">关闭 MySQL <a class="header-anchor" href="#关闭-mysql" aria-label="Permalink to &quot;关闭 MySQL&quot;">​</a></h3><p>关闭 Mysql</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"></span>
<span class="line"><span style="color:#6F42C1;">systemctl</span><span style="color:#032F62;"> stop</span><span style="color:#032F62;"> mysqld</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">service</span><span style="color:#032F62;"> mysqld</span><span style="color:#032F62;"> stop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">/etc/init.d/mysqld</span><span style="color:#032F62;"> stop</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">mysqladmin</span><span style="color:#005CC5;"> -uroot</span><span style="color:#005CC5;"> -p123</span><span style="color:#032F62;"> shutdown</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1;">mysql</span><span style="color:#005CC5;"> -uroot</span><span style="color:#005CC5;"> -p123</span><span style="color:#005CC5;"> -e</span><span style="color:#032F62;"> &quot;shutdown&quot;</span></span></code></pre></div><p>初始化数据：</p><div class="language-sh"><button title="Copy Code" class="copy"></button><span class="lang">sh</span><pre class="shiki github-light vp-code" tabindex="0"><code><span class="line"><span style="color:#6F42C1;">xxxx/mysqld</span><span style="color:#005CC5;"> \\</span></span>
<span class="line"><span style="color:#24292E;">--initialize-insecure </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--user=mysql </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--datadir=/data/3318/data </span><span style="color:#005CC5;">\\</span></span>
<span class="line"><span style="color:#24292E;">--basedir=/app/database/mysql180</span></span></code></pre></div>`,104)]))}const u=a(o,[["render",e]]);export{h as __pageData,u as default};
