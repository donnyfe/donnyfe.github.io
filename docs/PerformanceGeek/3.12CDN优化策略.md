
# 3.12 CDN优化策略

## CDN定义

内容分发网络(Content Deliver ry Network，简称CDN)是利用最靠近每每一位用户的服务器，更快、更可靠地将文件发送给用户分发网络。

## CDN优点

- 提速:会给用户指派较近、较顺畅白的服务器节点，将数据传输给用户
- 低成本:服务器被放到不同地点，减咸少了互连的流量，也降低了带宽成本
- 高可用度:当某个服务器故障时，自动调用邻近地区的服务器

## CDN回源

回源是指浏览器访问CDN 集群上静态文件时，文件缓存过期，直接穿透 DN集群而访问源站机器的形为。

## CDN缓存

- 三级缓存:浏览器本地缓存、CDN 边缘节点缓存、CDN 源站缓存
- 缓存设置:缓存时间设置的过短，CDN边缘节点缓存经常失效，导致频繁回源，增
大了源站负载，访问也慢;缓存时间设置的过长，文件更新慢，用户本地缓存不能及时更新;所以结合业务情况而定

- 不同静态资源类型缓存时间:
  - HTML:3分钟
  - jS、CSS:10分钟、1天、30天

## CDN灰度发布

- 原理:在部分地区、部分地区的部分运营商优先发布静态资源，验证通过后，再进行全量发布。

- 实施:域名方面，设置特殊VIP 解析至要灰度的城市、运营商;源站机器方面，给
灰度的城市、运营商配置单独源站机器; 灰度的城市、运营商解析至这些特有机器
上。

## CDN大促备战

- 增加机房带宽
- 增加运营商流量
- 灾备:CDN 应用缓存时间由10分钟设置成1个小时，大促后恢复。
